#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

branch="$(git rev-parse --abbrev-ref HEAD)"
if [ "$branch" = "main" ]; then
  echo "âŒ Direct commits to 'main' branch are not allowed!"
  echo "ğŸ“ Please create a feature branch and submit a pull request."
  exit 1
fi
echo "âœ… Branch check passed: $branch"

echo "ğŸ” Running type checks..."
if ! npm run typecheck; then
  echo "âŒ Type checks failed. Please fix TypeScript errors."
  exit 1
fi
echo "âœ… Type checks passed."

echo "ğŸ” Running lint checks..."
if ! npm run lint; then
  echo "âŒ Lint checks failed. Please fix ESLint errors."
  exit 1
fi
echo "âœ… Lint checks passed."

echo "ğŸ” Running format checks..."
if ! npm run format:check; then
  echo "âŒ Format checks failed. Please run 'npm run format' to fix formatting."
  exit 1
fi
echo "âœ… Format checks passed."

echo "ğŸ‰ All checks passed. Proceeding with commit."
